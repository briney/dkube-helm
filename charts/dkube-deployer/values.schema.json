{
  "$schema":"http://json-schema.org/draft-07/schema",
  "type":"object",
  "title":"The root schema",
  "description":"The root schema comprises the entire JSON document.",
  "required":[
    "dkube"
  ],
  "properties":{
    "dkube":{
      "$id":"#/properties/dkube",
      "type":"object",
      "title":"The dkube schema",
      "description":"An explaination about the purpose of this instance.",
      "required":[
        "required",
        "storage"
      ],
      "properties":{
        "required":{
          "$id":"#/properties/dkube/properties/required",
          "type":"object",
          "title":"The required schema",
          "description":"An explanation about the purpose of this instance.",
          "required":[
            "kubeProvider",
            "username",
            "password"
          ],
          "properties":{
            "kubeProvider":{
              "$id":"#/properties/dkube/properties/required/properties/kubeProvider",
              "enum": ["dkube", "gke", "okd", "eks", "ntnx"]
            },
            "username":{
              "$id":"#/properties/dkube/properties/required/properties/username",
              "type":"string",
              "pattern":"^[A-Za-z0-9-_]+$"
            },
            "password":{
              "$id":"#/properties/dkube/properties/required/properties/password",
              "type":"string",
              "pattern":"^[A-Za-z0-9@!%*#?&]{7,20}$"
            }
          },
          "additionalProperties":true
        },
        "storage":{
          "$id":"#/properties/dkube/properties/storage",
          "type":"object",
          "properties": {
            "storageType": {
              "enum": ["disk", "pv", "sc", "nfs", "ceph"]
            }
          },
          "allOf":[
            {
              "if": {
                "properties": {"storageType": {"const": "disk"}}
              },
              "then": {
                "$ref": "#/properties/dkube/definitions/disk"
              }
            },
            {
              "if": {
                "properties": {"storageType": {"const": "pv"}}
              },
              "then": {
                "$ref": "#/properties/dkube/definitions/pv"
              }
            },
            {
              "if": {
                "properties": {"storageType": {"const": "sc"}}
              },
              "then": {
                "$ref": "#/properties/dkube/definitions/sc"
              }
            },
            {
              "if": {
                "properties": {"storageType": {"const": "nfs"}}
              },
              "then": {
                "$ref": "#/properties/dkube/definitions/nfs"
              }
            },
            {
              "if": {
                "properties": {"storageType": {"const": "ceph"}}
              },
              "then": {
                "$ref": "#/properties/dkube/definitions/ceph"
              }
            }
          ]
        }
      },
      "definitions":{
        "disk":{
          "properties":{
            "storageDiskPath":{
              "type":"string",
              "pattern":"^(/[^/ ]*)+/?$"
            },
            "storageDiskNode":{
              "type":"string",
              "minLength": 1
            }
          },
          "required":[
            "storageDiskPath",
            "storageDiskNode"
          ]
        },
        "pv":{
          "properties":{
            "storagePV":{
              "type":"string",
              "minLength": 1
            }
          },
          "required":[
            "storagePV"
          ]
        },
        "sc":{
          "properties":{
            "storageSC":{
              "type":"string",
              "minLength": 1
            }
          },
          "required":[
            "storageSC"
          ]
        },
        "nfs":{
          "properties":{
            "storageNFSPath":{
              "type":"string",
              "pattern":"^(/[^/ ]*)+/?$"
            },
            "storageNFSServer":{
              "type":"string",
              "minLength": 1
            }
          },
          "required":[
            "storageNFSPath",
            "storageNFSServer"
          ]
        },
        "ceph":{
          "properties":{
            "storageCEPHMonitors":{
              "type":"string",
              "minLength": 1
            },
            "storageCEPHSecret":{
              "type":"string",
              "minLength": 1
            }
          },
          "required":[
            "storageCEPHMonitors",
            "storageCEPHSecret"
          ]
        }
      }
    },
    "additionalProperties":true
  }
}