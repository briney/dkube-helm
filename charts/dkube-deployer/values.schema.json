{
  "$schema":"http://json-schema.org/draft-07/schema",
  "type":"object",
  "title":"The root schema",
  "description":"The root schema comprises the entire JSON document.",
  "required":[
    "dkube"
  ],
  "properties":{
    "dkube":{
      "$id":"#/properties/dkube",
      "type":"object",
      "title":"The dkube schema",
      "description":"An explaination about the purpose of this instance.",
      "required":[
        "required",
        "storage"
      ],
      "properties":{
        "required":{
          "$id":"#/properties/dkube/properties/required",
          "type":"object",
          "title":"The required schema",
          "description":"An explanation about the purpose of this instance.",
          "required":[
            "kubeProvider",
            "username",
            "password"
          ],
          "properties":{
            "kubeProvider":{
              "$id":"#/properties/dkube/properties/required/properties/kubeProvider",
              "enum": ["dkube", "gke", "okd", "eks", "ntnx"]
            },
            "username":{
              "$id":"#/properties/dkube/properties/required/properties/username",
              "type":"string",
              "pattern":"^[A-Za-z0-9-_]+$"
            },
            "password":{
              "$id":"#/properties/dkube/properties/required/properties/password",
              "type":"string",
              "pattern":"^[A-Za-z0-9@!%*#?&]{8,20}$"
            }
          },
          "additionalProperties":true
        },
        "storage":{
          "$id":"#/properties/dkube/properties/storage",
          "type":"object",
          "oneOf":[
            {
              "$ref":"#/properties/dkube/definitions/disk"
            },
            {
              "$ref":"#/properties/dkube/definitions/pv"
            },
            {
              "$ref":"#/properties/dkube/definitions/sc"
            },
            {
              "$ref":"#/properties/dkube/definitions/nfs"
            },
            {
              "$ref":"#/properties/dkube/definitions/ceph"
            }
          ]
        }
      },
      "definitions":{
        "disk":{
          "properties":{
            "storageType":{
              "enum":[
                "disk"
              ]
            },
            "storageDiskPath":{
              "type":"string",
              "pattern":"^(/[^/]+)+$"
            },
            "storageDiskNode":{
              "type":"string",
              "oneOf":[
                {
                  "format":"host-name"
                },
                {
                  "format":"ipv4"
                }
              ]
            }
          },
          "required":[
            "storageType",
            "storageDiskPath",
            "storageDiskNode"
          ]
        },
        "pv":{
          "properties":{
            "storageType":{
              "enum":[
                "pv"
              ]
            },
            "storagePV":{
              "type":"string"
            }
          },
          "required":[
            "storageType",
            "storagePV"
          ]
        },
        "sc":{
          "properties":{
            "storageType":{
              "enum":[
                "sc"
              ]
            },
            "storageSC":{
              "type":"string"
            }
          },
          "required":[
            "storageType",
            "storageSC"
          ]
        },
        "nfs":{
          "properties":{
            "storageType":{
              "enum":[
                "nfs"
              ]
            },
            "storageNFSPath":{
              "type":"string",
              "pattern":"^(/[^/]+)+$"
            },
            "storageNFSServer":{
              "type":"string",
              "oneOf":[
                {
                  "format":"host-name"
                },
                {
                  "format":"ipv4"
                }
              ]
            }
          },
          "required":[
            "storageType",
            "storageNFSPath",
            "storageNFSServer"
          ]
        },
        "ceph":{
          "properties":{
            "storageType":{
              "enum":[
                "ceph"
              ]
            },
            "storageCEPHMonitors":{
              "type":"string"
            },
            "storageCEPHSecret":{
              "type":"string"
            }
          },
          "required":[
            "storageType",
            "storageCEPHMonitors",
            "storageCEPHSecret"
          ]
        }
      }
    },
    "additionalProperties":true
  }
}